<igo-list [navigation]="true">
  <ng-template
    #groupTemplate
    ngFor let-group
    [ngForOf]="results$ | async">

    <igo-collapsible
      title="{{group.source.title}} ({{group.results.length}})"
      *ngIf="mode === searchResultMode.Grouped; else flatTemplate">
      <ng-container *ngTemplateOutlet="storeItemTemplate; context: {results: group.results}"></ng-container>
    </igo-collapsible>

    <ng-template #flatTemplate>
      <ng-container *ngTemplateOutlet="storeItemTemplate; context: {results: group.results}"></ng-container>
    </ng-template>

    <ng-template #storeItemTemplate let-results="results">
      <ng-template ngFor let-result [ngForOf]="results">
        <fadq-search-results-item
          igoListItem
          color="accent"
          [result]="result"
          [focused]="store.getEntityState(result).focused"
          [selected]="store.getEntityState(result).selected"
          (focus)="onResultFocus(result)"
          (select)="onResultSelect(result)">
        </fadq-search-results-item>
      </ng-template>
    </ng-template>

  </ng-template>
</igo-list>