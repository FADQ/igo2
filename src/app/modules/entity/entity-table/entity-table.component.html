<div class="table-box">
  <div class="table-container">
    <table
      mat-table
      matSort
      [ngClass]="getTableClass()"
      [dataSource]="dataSource"
      (matSortChange)="onSort($event)">

      <ng-container [matColumnDef]="column.name" *ngFor="let column of model.columns">
        <ng-container *ngIf="columnIsSortable(column)">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            {{column.title}}
          </th>
        </ng-container>

        <ng-container *ngIf="!columnIsSortable(column)">
          <th mat-header-cell *matHeaderCellDef>
            {{column.title}}
          </th>
        </ng-container>

        <ng-container *ngIf="!column.html; else cellHTML">
          <td mat-cell *matCellDef="let entity" class="mat-cell-text"
            [ngClass]="getCellClass(entity, column)">
            {{valueAccessor(entity, column)}}
          </td>
        </ng-container>

        <ng-template #cellHTML>
          <td mat-cell *matCellDef="let entity" class="mat-cell-text"
            [ngClass]="getCellClass(entity, column)"
            [innerHTML]="getValue(entity, column)">
          </td>
        </ng-template>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="headers;"></tr>
      <tr mat-row
        *matRowDef="let entity; columns: headers;"
        [ngClass]="getRowClass(entity)"
        (click)="onEntityClick(entity)">
      </tr>

    </table>
  </div>

</div>
